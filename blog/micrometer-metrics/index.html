<!DOCTYPE html>
<html>





<head>
  <title>Quarkus - Micrometer is recommended for metrics with Quarkus 1.9</title>
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/micrometer-metrics/" />
  <meta property="og:title" content="Micrometer is recommended for metrics with Quarkus 1.9" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/micrometer-metrics/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="post">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
      
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
      
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <div id="menu" class="menu">
      <span>
        <a href="/get-started/" class="">Get Started</a>
      </span>
      <span>
        <a href="/guides/" class="">Guides</a>
      </span>
      <span>
        <a href="/community/" class="">Community</a>
      </span>
      <span>
        <a href="/support/" class="">Support</a>
      </span>
      <span>
        <a href="/blog/" class="active">Blog</a>
      </span>
      <span>
        <a href="https://code.quarkus.io" class="button-cta secondary white">Start Coding</a>
      </span>
    </div>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <p>
          <a href="/blog"><i class="fas fa-angle-left"></i> Back to all posts</a>
        </p>
      </div>
      <div class="width-12-12">
        <div class="post-date">
          October 19, 2020 
          
            <span class="tags"><a href="/blog/tag/metrics">#metrics</a><a href="/blog/tag/announcement">#announcement</a><a href="/blog/tag/micrometer">#micrometer</a></span>
          
        </div>
        <h1 class="post-title">Micrometer is recommended for metrics with Quarkus 1.9</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            
            
              <img class="headshot" src="https://www.gravatar.com/avatar/74e721dd22b0d509b85746c5edf559c8">
            
            <p class="byline">By Ken Finnigan</p>
          </div>
          <div class="width-12-12">
              <div class="paragraph">
<p>Though Quarkus offers extensions for MicroProfile,
including metrics,
we&#8217;re now recommending the use of the Micrometer extension for metrics in Quarkus with the release of 1.9.</p>
</div>
<div class="sect1">
<h2 id="brief-microprofile-metrics-history"><a class="anchor" href="#brief-microprofile-metrics-history"></a>Brief MicroProfile Metrics History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the creation of the MicroProfile Metrics specification in 2017,
Dropwizard Metrics was the most popular metrics library at that time.
It was a natural fit for MicroProfile to use DropWizard Metrics as inspiration for a metrics specification.</p>
</div>
<div class="paragraph">
<p>The monitoring ecosystem for cloud environments has evolved considerably since then,
and that has prompted a re-evaluation of how we approach working with metrics.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="why-micrometer"><a class="anchor" href="#why-micrometer"></a>Why Micrometer?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the last 3-4 years,
there&#8217;s been a growing focus on the needs of Site Reliability Engineers (SREs) in monitoring the operations of many varied services.
This focus leads to driving simplicity and ease of use to the SRE world.
We don&#8217;t want make the life of an SRE harder!</p>
</div>
<div class="paragraph">
<p>The design and development of Micrometer focused on the needs of SREs from the very beginning.
A key aspect to that approach is separating out the metric implementation into the registries,
enabling different registries to customize how the metric export,
aligning with a specific monitoring tool.</p>
</div>
<div class="paragraph">
<p>Micrometer was built to adapt to the changing cloud native landscape while presenting a steady API for applications and libraries to use.
Each MeterRegistry implementation encapsulates its specific aggregation and reporting requirements.
There are MeterRegistry implementations available for cloud monitoring systems like Prometheus and Statsd,
as well as service providers like Datadog, New Relic or Stackdriver.
You can include more than one of these registries at the same time, too.</p>
</div>
<div class="paragraph">
<p>While Micrometer has an API for applications to use,
practical usage is more focused on the MeterBinder abstraction.
MeterBinders allow instrumentation for application libraries to be added later.
It is even better when your application framework can register discovered MeterBinders on your behalf.</p>
</div>
<div class="paragraph">
<p>Micrometer does follow different naming conventions than Dropwizard or MP Metrics, for a few reasons.
First, it uses a dot notation for all metric names, e.g. my.metric.name.
Each registry implementation can then apply its own naming convention to convert that name into something that matches its convention.
The Prometheus MeterRegistry converts my.metric.name into my_metric_name, for example.
Second, Micrometer was built around the notion of dimensional metrics, rather than adapting to it later.</p>
</div>
<div class="paragraph">
<p>Another benefit to using Micrometer is its usage in the wider Java ecosystem.
Spring Boot and Micronaut both use Micrometer, amongst others.
In an environment where SREs are monitoring instances of different Java frameworks,
having them all produce metrics with the same names and dimensions is incredibly beneficial.</p>
</div>
<div class="paragraph">
<p>For example, we likely have a metric for an HTTP endpoint like below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell script hljs" data-lang="shell script">http_server_requests{method="GET", uri="/hello", status="200", outcome="SUCCESS"}
http_server_requests{method="GET", uri="/hello", status="500", outcome="SERVER_ERROR"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With Quarkus,
the Micrometer extension emits the same HTTP endpoint metric irrespective of whether it was created by JAX-RS,
Vert.x, or Undertow without the developer needing to add anything to their code.
The only effort required is to activate metrics.</p>
</div>
<div class="paragraph">
<p>The http metrics emitted by the Micrometer extension is the also same as what is emitted by Spring Boot and Micronaut,
allowing SREs to work with aggregated http metrics regardless of which Java framework is used.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="can-i-still-use-microprofile-metrics"><a class="anchor" href="#can-i-still-use-microprofile-metrics"></a>Can I still use MicroProfile Metrics?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MicroProfile Metrics extension, <code>quarkus-smallrye-metrics</code>,
is still available and usable by applications.
For all the reasons outlined in <a href="#why-micrometer">Why Micrometer?</a>,
Quarkus no longer recommends applications use the extension.</p>
</div>
<div class="paragraph">
<p>In the short to medium term,
we will be working with the MicroProfile Metrics community to evolve the specification to be aligned with Micrometer.
What that means for the specification is not likely to be known until some time in 2021.</p>
</div>
<div class="paragraph">
<p>For those that prefer to retain compatibility with MicroProfile Metrics,
despite the problems discussed in <a href="#why-micrometer">Why Micrometer?</a>,
that will remain possible,
but at the discretion of application developers to make the informed choice.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since 1.8 Quarkus offered two extensions for metrics,
<code>quarkus-micrometer</code> and <code>quarkus-smallrye-metrics</code>.
With the release of 1.9,
Quarkus will be recommending <code>quarkus-micrometer</code> for use with metrics.</p>
</div>
<div class="paragraph">
<p>Come play with the extension,
we love it for many reasons and hope you will too.
Reach out if you have any issues using the Micrometer extension in Quarkus!</p>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/micrometer-metrics/&title=Micrometer is recommended for metrics with Quarkus 1.9" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <img src="/assets/images/share-page/icons_social-linkedin.png"/>
  </a>
  <a class="share-twitter" href="https://twitter.com/intent/tweet?text=Micrometer is recommended for metrics with Quarkus 1.9&url=https://quarkus.io/blog/micrometer-metrics/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on Twitter">
    <img src="/assets/images/share-page/icons_social-twitter.png"/>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/micrometer-metrics/" rel="nofollow" target="_blank" title="Share on Facebook">
    <img src="/assets/images/share-page/icons_social-facebook.png"/>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/micrometer-metrics/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <img src="/assets/images/share-page/icons_social-reddit.png"/>
  </a>
  <a class="share-email" href="mailto:?subject=Micrometer is recommended for metrics with Quarkus 1.9&amp;body=Micrometer is recommended for metrics with Quarkus 1.9 https://quarkus.io/blog/micrometer-metrics/" title="Share via Email" >
    <img src="/assets/images/share-page/icons_social-email.png"/>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
            <li><a href="/community/#contributing">Contribute</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Contribute</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">Follow us</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
            <li><a href="/security">Security&nbsp;policy</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://quarkusio.zulipchat.com">Chat room</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">Development mailing list</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
</body>

</html>
